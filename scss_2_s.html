<!DOCTYPE html> <html lang="ru"> <head> <meta charset="utf-8"> <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="apple-touch-icon" sizes="57x57" href="/images/favicon/apple-icon-57x57.png"> <link rel="apple-touch-icon" sizes="60x60" href="/images/favicon/apple-icon-60x60.png"> <link rel="apple-touch-icon" sizes="72x72" href="/images/favicon/apple-icon-72x72.png"> <link rel="apple-touch-icon" sizes="76x76" href="/images/favicon/apple-icon-76x76.png"> <link rel="apple-touch-icon" sizes="114x114" href="/images/favicon/apple-icon-114x114.png"> <link rel="apple-touch-icon" sizes="120x120" href="/images/favicon/apple-icon-120x120.png"> <link rel="apple-touch-icon" sizes="144x144" href="/images/favicon/apple-icon-144x144.png"> <link rel="apple-touch-icon" sizes="152x152" href="/images/favicon/apple-icon-152x152.png"> <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon/apple-icon-180x180.png"> <link rel="icon" type="image/png" sizes="192x192" href="/images/favicon/android-icon-192x192.png"> <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon/favicon-32x32.png"> <link rel="icon" type="image/png" sizes="96x96" href="/images/favicon/favicon-96x96.png"> <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon/favicon-16x16.png"> <link rel="manifest" href="/images/favicon/manifest.json"> <meta name="msapplication-TileColor" content="#ffffff"> <meta name="msapplication-TileImage" content="/images/favicon/ms-icon-144x144.png"> <meta name="theme-color" content="#ffffff"> <meta name="msvalidate.01" content="F34FD0093D04052D38754E18AC0F06D4" /> <meta name="google-site-verification" content="1sv4ffgnLcR8LaWDKMiDEJ18oS1SYX0jdZmUabp3n3s" /> <title>Эстетичный Sass часть 1: архитектура и организация</title> <meta name="description" content="Организация архитектуры Sass с примером рефакторинга компонента из CSS в SCSS"> <meta name="twitter:card" content="summary"> <meta name="twitter:site" content="Прогрессор"> <meta name="twitter:creator" content="@prgssr"> <meta name="twitter:title" content="Эстетичный Sass часть 1: архитектура и организация"> <meta name="twitter:url" content="http://prgssr.ru/development/estetichnyj-sass-chast-1-arhitektura-i-organizaciya.html"> <meta name="twitter:description" content="Организация архитектуры Sass с примером рефакторинга компонента из CSS в SCSS"> <meta name="twitter:image:src" content="http://prgssr.ru/images/pr.png"> <meta name="og:image" content="http://prgssr.ru/images/pr.png" /> <meta property="og:site_name" content="Прогрессор"/> <meta property="og:type" content="blog"/> <meta name="og:url" content="http://prgssr.ru/development/estetichnyj-sass-chast-1-arhitektura-i-organizaciya.html" /> <meta name="og:title" content="Эстетичный Sass часть 1: архитектура и организация" /> <meta name="og:description" content="Организация архитектуры Sass с примером рефакторинга компонента из CSS в SCSS" /> <link rel="stylesheet" href="/css/main.css"> <link rel="canonical" href="http://prgssr.ru/development/estetichnyj-sass-chast-1-arhitektura-i-organizaciya.html"> <link rel="dns-prefetch" href="//disqus.com"> <link rel="dns-prefetch" href="//a.disquscdn.com/"> <link rel="alternate" type="application/rss+xml" title="Прогрессор" href="http://prgssr.ru/feed.xml" /> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-64674967-1', 'auto'); ga('send', 'pageview'); </script> <link rel="stylesheet" href="/css/prism.css"> <script src="/js/prism.js"></script> </head> <body> <div class="page-wrap"> <header class="site-header"> <div class="wrapper"> <a class="site-title" href="/">Прогрессор</a> <nav class="site-nav"> <a href="#" class="menu-icon" data-proofer-ignore> <svg viewBox="0 0 18 15" height="15px" width="18px"> <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/> <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/> <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/> </svg> </a> <div class="trigger"> <a class="page-link" href="/about/">О сайте</a> <a class="page-link" href="/documentation/">Документация Jekyll</a> <a class="page-link" href="/articles/">Статьи</a> <a class="page-link" href="/development/">Переводы</a> </div> </nav> </div> </header> <div class="page-content"> <div class="wrapper"> <div itemscope itemtype="http://schema.org/BlogPosting" class="post"> <meta itemprop="keywords" content="Статья о SASS,Перевод,scotch.io" /> <meta itemprop="description" content="Организация архитектуры Sass с примером рефакторинга компонента из CSS в SCSS" /> <header class="post-header"> <h1 class="post-title" itemprop="headline">Эстетичный Sass часть 1: архитектура и организация</h1> <p class="post-meta"> <time class="published" itemprop="datePublished" datetime="2015-09-29"> 29 Сентября 2015 </time> </p> </header> <p> <span class="original-author">Автор: <a href="https://twitter.com/DavidKPiano"> David Khourshid</a></span> </p> <p> <span class="original">Оригинал статьи: <a href="https://scotch.io/tutorials/aesthetic-sass-1-architecture-and-style-organization">Aesthetic Sass 1: Architecture and Style Organization</a></span> </p> <span class="toc-title">Оглавление:</span> <ul class="toc-list"> <li class="toc-item"> <a href="#heading-section">Архитектура</a> <ul class="toc-list"> </ul> </li> <li class="toc-item"> <a href="#heading-scss">Стилизация компонентов с SCSS</a> <ul class="toc-list"> </ul> </li> <li class="toc-item"> <a href="#heading-section-1">Организация стилей компонентов</a> <ul class="toc-list"> <li class="toc-item"> <a href="#heading-section-2">Переменные</a> <ul class="toc-list"> </ul> </li> <li class="toc-item"> <a href="#heading-section-3">Миксины</a> <ul class="toc-list"> </ul> </li> <li class="toc-item"> <a href="#heading-section-4">Структура</a> <ul class="toc-list"> </ul> </li> <li class="toc-item"> <a href="#heading-section-5">Экспортируемые селекторы</a> <ul class="toc-list"> </ul> </li> </ul> </li> <li class="toc-item"> <a href="#heading-section-6">Заключение</a> <ul class="toc-list"> </ul> </li> </ul> <article itemprop="articleBody" class="post-content"> <meta itemprop="image" content="http://prgssr.ru/images/pr.png"> <p>Sass это очень мощное расширение языка CSS, дающее возможность улучшить как организацию стилей, так и сами стили.</p> <p>Правильная архитектура файлов CSS в проекте избавит вас и ваших коллег от необходимости поиска нужных стилей и от раздумий, куда добавлять новые.</p> <p>Организация внутри стилевых таблиц очень важна — система именования, стили, специфичность компонентов должны быть единообразными на всем проекте. Они должны быть организованы так, чтобы смягчать конфликты и предотвращать смешение стилей у селекторов.</p> <p>Статьи в серии эстетичный Sass предполагают базовое знание Sass. Если вы новичок, предлагаю вам ознакомиться с нашей <a href="https://scotch.io/tutorials/getting-started-with-sass">статьей для начинающих</a> или следующими ресурсами:</p> <ul> <li><a href="http://demosthenes.info/blog/978/Learning-Sass-with-CodePen-Part-One">Изучаем SASS на примерах CodePen</a></li> <li><a href="http://sass-lang.com/guide">Курс по SASS</a></li> </ul> <h2 id="heading-section">Архитектура</h2> <p>Правильная архитектура Sass имеет решающее значение для создания поддерживаемого, масштабируемого и хорошо организованного проекта. Sass упрощает разделение вашего проекта на логические модули с помощью директивы <code>@import</code>, которая отличается от нативного <code>@import</code> в CSS тем, что подключает файлы .scss и .sass перед генерацией CSS.</p> <p>Подробнее эта директива описана в <a href="http://sass-lang.com/documentation/file.SASS_REFERENCE.html#import">документации</a>.</p> <p>Существует много подходов к архитектуре проектов, у каждого есть свои плюсы и минусы. Самое главное здесь — <strong>следовать выбранной архитектуре</strong>. В нашей статье мы будем следовать <a href="http://sass-guidelin.es/#the-7-1-pattern">паттерну 7-1</a>, предложенному Хьюго Жираделем. В этом паттерне применяются 7 каталогов и один файл <code>main.scss</code> на выходе:</p> <ul> <li><code>base/</code> — включает глобальные стили, такие как сброс стилей, типография, цвета и т.д.</li> <li><code>components/</code> — содержит отдельные компоненты с отдельным файлом .scss для каждого из них.</li> <li><code>layout/</code> — содержит стили для основных компонентов макета, таких как хедер, футер, навигация и т.д.</li> <li><code>pages/</code> — содержит стили, специфичные для отдельных страниц, если это необходимо.</li> <li><code>themes/</code> — стили для разных тем.</li> <li><code>utils/</code> — глобальные миксины, функции, вспомогательные селекторы и т.д.</li> <li><code>vendors</code>/ — стили, миксины и прочее от третьих сторон</li> <li><code>main.scss</code> — выходной файл, в котором объединяются все стили.</li> </ul> <p>В каждом каталоге должен быть файл .scss, объединяющий все остальные файлы из этого каталога - он может называться <code>_module.scss</code> или <code>_glob.scss</code>, например. И на каждый из этих файлов должна быть ссылка в основном файле main.scss:</p><pre><code class="language-scss">// main.scss
@import 'base/module';
@import 'components/module';
@import 'layout/module';
@import 'pages/module';
@import 'themes/module';
@import 'utils/module';
@import 'vendors/module';

</code></pre><h2 id="heading-scss">Стилизация компонентов с SCSS</h2> <p>Все основные архитектуры CSS, включая <a href="https://smacss.com/">SMACSS</a>, <a href="https://github.com/stubbornella/oocss/wiki">OOCSS</a> и <a href="http://bradfrost.com/blog/post/atomic-web-design/"> Atomic Design </a> акцентируют важность модульности и подхода к пользовательскому интерфейсу как к <strong>набору компонентов</strong>.</p> <p>В общем, компоненты это <strong>многократно используемые, самодостаточные и независимые элементы пользовательского интерфейса</strong>. Компоненты могут создаваться из других компонентов, например, форма поиска содержит поле ввода текста и кнопку; компоненты могут варьироваться, в частности, у них может изменяться размер и цвет.</p> <p>Как было сказано, мы можем использовать Sass для организации стилей, как общих так и компонентных. Для демонстрации этого создадим простой компонент — кнопку, не используя при этом какую-либо архитектурную или организационную систему:</p><pre><code class="language-scss">.button {
    display: inline-block;
    padding: 8px 16px;
    font-size: 12px;
    font-weight: bold;
    color: #d9534f;
    text-transform: uppercase;
    background-color: transparent;
    border: 1px solid #d9534f;
    transition: all 0.3s ease-in-out;

    &amp;:hover {
        background-color: #d9534f;
        color: #fcfcfc;
    }
}

</code></pre><p><img src="/images/development/sass/Screen-Shot-2015-03-23-at-7.46.34-AM.png" alt="button" /></p> <p>Кнопка должна выглядеть именно так, как мы хотим, но в представленном коде есть некоторые проблемы:</p> <ul> <li>Слишком много <a href="https://ru.wikipedia.org/wiki/%D0%9C%D0%B0%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5_%D1%87%D0%B8%D1%81%D0%BB%D0%BE_%28%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%29">магических чисел</a>, таких как 8px, 12px, 16px, #d9534f, #fcfcfc, 0.3s и т.д.</li> <li>Негибкая тема — нет простого способа создания аналогичной кнопки с другим цветом.</li> <li>Явный селектор — если изменится содержимое <code>.button</code> это отразится на всех экземплярах <code>.button</code> в проекте.</li> <li>Потенциальная несвязанность — нет гарантий, что стиль кнопки будет соответствовать стилю проекта.</li> </ul> <p>Попробуем смягчить эти проблемы с помощью SCSS.</p> <h2 id="heading-section-1">Организация стилей компонентов</h2> <p>Создание общей структуры проекта является достаточно простой задачей, но при этом стили каждого компонента должны обеспечивать гибкость, достаточную для адаптации к любой теме, а также совместимость с остальными компонентами. Это ключ к созданию правильно и красиво выглядящего сайта или веб-приложения. Правильно структурированный компонент будет включать в себя следующие составные части:</p> <ul> <li>Variables (переменные) —- для соотнесения значений, специфичных для компонента с общим стилем сайта и во избежание использования магических чисел.</li> <li>Mixins (миксины) —- для динамически-генерируемых вариаций компонента (не обязательны, если несколько вариаций уже есть).</li> <li>Structure (структура) —- структура или макет компонента, все остальное типа цветов сюда не относится.</li> <li>Relationships (отношения) —- любые CSS, которые отвечают за отношения с другими компонентами.</li> <li>Themes (темы) —- CSS, не относящиеся к макету: фоны, цвета, тени и т.д.</li> <li>Exported Selectors (экспортируемые селекторы) —- используемые классы и селекторы CSS</li> </ul> <p>Нашу кнопку из предыдущего примера имеет смысл переделать в соответствии с этой методикой.</p> <h3 id="heading-section-2">Переменные</h3> <p>При добавлении переменных к компоненту возникает два главных вопроса:</p> <ol> <li>Что это такое?</li> <li>Как это соотносится со стилем всего проекта?</li> </ol> <p>Исходя из этого, мы извлечем из кода нашей кнопки следующие переменные:</p><pre><code class="language-scss">$button-padding: 0.5rem 1rem;
$font-size: 12px;             // 1 factor below base 16px in modular type scale
$button-bgcolor: #d9534f;     // the primary brand color
$button-border-width: 1px;    // border width for all form inputs
$button-color-hover: #fcfcfc; // the light/white brand color
</code></pre><p>Это неплохое начало, теперь все магические числа имеют смысл. После того, как все важные базовые и компонентные стили определены, можно сделать еще один шаг вперед и связать эти переменные со свойствами.</p><pre><code class="language-scss">// Pseudocode, for this example
$button-padding: 0.5rem 1rem;
$font-size: type-scale(-1);                // utility function
$button-bgcolor: $color-primary;           // from 'base/_colors.scss'
$button-border-width: $input-border-width; // from 'component/_input.scss'
$button-color-hover: $color-light;         // from 'base/_colors.scss'
</code></pre><h3 id="heading-section-3">Миксины</h3> <p>Специфичные для компонента миксины позволяют динамически определить стилевые варианты компонента. Если подходить прагматично,то ограничение списка свойств, изменяемых миксином это неплохая идея — вы можете не нуждаться в различных вариациях ширины границ или размера шрифта, это может вызвать несоответствие стиля компонента с остальным стилем сайта.</p> <p>Основная структура нашей кнопки-образца должна оставаться стабильной, но цвет ее можно изменять:</p><pre><code class="language-scss">@mixin scotch-button-theme($color, $color-text-hover: $color-light) {
    color: $color;
    border-color: $color;
    background-color: transparent;

    &amp;:hover {
        color: $color-text-hover;
        background-color: $color;
    }
}

</code></pre><p>Теперь мы с легкостью можем создавать различные цветовые варианты нашей кнопки, просто <code>@include scotch-button-theme(blue)</code>.</p> <h3 id="heading-section-4">Структура</h3> <p>Структура компонентов состоит из правил, которые не могут темизироваться, то есть относящихся к макету компонента. Гибким паттерном для этого является создание <code>%placeholder</code>, расширяемого единственным селектором. Если со временем вы захотите удалить компонент из стилей, просто удалите селектор и это не повлечет каких-либо побочных эффектов для остальных компонентов. Также эта методика позволяет определять нужный селектор лишь один раз, упрощая последствия в случае его переименования.</p> <p>Вот структура нашего компонента-кнопки. Заметьте, насколько меньше в ней стало темизируемых правил:</p><pre><code class="language-scss">%button {
    display: inline-block;
    padding: $button-padding;
    font-size: $button-font-size;
    font-weight: bold;
    text-transform: uppercase;
    border-width: $button-border-width;
    border-style: solid;
}

</code></pre><h3 id="heading-section-5">Экспортируемые селекторы</h3> <p>Эти стили можно выделить в отдельный класс, который я назвал <code>.scotch-button</code>. Он создается путем подключения базовой структуры и темы:</p><pre><code class="language-scss">.scotch-button {
    @extend %button;
    @include scotch-button-theme($color-primary);

    &amp;.secondary {
        @include scotch-button-theme($color-secondary);
    }
}

</code></pre><p>Вы отметили вариант с <code>.scotch-button.secondary</code>? Единственное различие между двумя вариантами это цвет. Еще одной выгодой от экспортируемых селекторов является их отделение от общих стилевых деклараций в плейсхолдер и это дает возможность легко встраивать их в любых системах именования. Например, в BEM <code>&amp;.secondary</code> станет <code>&amp;--secondary</code>.</p> <h2 id="heading-section-6">Заключение</h2> <p>Правильная архитектура и организация стилей имеет решающее значение при разработке стилей — у нас получаются модульные, гибкие и масштабируемые стили компоненты. Вместо того, чтобы спрашивать себя “Куда мне поместить этот стиль?” и “Что означает это магическое число?”, лучше с самого начала спланировать и определить архитектуру и организацию стилей.</p> <p>Следующая часть в нашей серии эстетичный Sass — цвета и палитры.</p> </article> <div> <h6>Серия статей: "Эстетичный Sass":</h6> <ol> <li> <span>Эстетичный Sass часть 1: архитектура и организация</span> </li> <li> <a href="/development/estetichnyj-sass-chast-2-cveta-i-palitry.html">Эстетичный Sass часть 2: цвета и палитры</a> </li> <li> <a href="/development/estetichnyj-sass-chast-3-tipografika-i-vertikalnyj-ritm.html">Эстетичный Sass часть 3: типографика и вертикальный ритм</a> </li> </ol> <p class="post-meta" <time class="published" datetime="2015-09-29"> 29 Сентября 2015 </time> </p> <p class="post-tags" <span> Теги: <a href="/tag/sass">#sass</a>, <a href="/tag/scotch">#scotch</a> </span> </p> <div id="disqus_thread"></div> <script type="text/javascript"> /* * * CONFIGURATION VARIABLES * * */ var disqus_shortname = 'prgssr'; /* * * DON'T EDIT BELOW THIS LINE * * */ (function() { var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true; dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js'; (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq); })(); </script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript> </div> </div> </div> </div> </div> <footer class="site-footer"> <div class="wrapper"> <ul class="social-media-list"> <li> <a href="/feed.xml" title="http://prgssr.ru/feed.xml"> <span class="icon"> <svg class="icon-rss" viewBox="0 0 512 512" width="32px" height="32px"><path d="M201.8 347.2c0 20.3-16.5 36.8-36.8 36.8 -20.3 0-36.8-16.5-36.8-36.8s16.5-36.8 36.8-36.8C185.3 310.4 201.8 326.8 201.8 347.2zM128.2 204.7v54.5c68.5 0.7 124 56.3 124.7 124.7h54.5C306.7 285.3 226.9 205.4 128.2 204.7zM128.2 166.6c57.9 0.3 112.3 22.9 153.2 63.9 41 41 63.7 95.5 63.9 153.5h54.5c-0.3-149.9-121.7-271.4-271.6-271.9V166.6L128.2 166.6z"/></svg> </span> </a> </li> <li> <a href="https://twitter.com/@prgssr" title="https://twitter.com/@prgssr"> <span class="icon"> <svg class="icon-twitter" viewBox="0 0 512 512" width="32px" height="32px"><path d="M419.6 168.6c-11.7 5.2-24.2 8.7-37.4 10.2 13.4-8.1 23.8-20.8 28.6-36 -12.6 7.5-26.5 12.9-41.3 15.8 -11.9-12.6-28.8-20.6-47.5-20.6 -42 0-72.9 39.2-63.4 79.9 -54.1-2.7-102.1-28.6-134.2-68 -17 29.2-8.8 67.5 20.1 86.9 -10.7-0.3-20.7-3.3-29.5-8.1 -0.7 30.2 20.9 58.4 52.2 64.6 -9.2 2.5-19.2 3.1-29.4 1.1 8.3 25.9 32.3 44.7 60.8 45.2 -27.4 21.4-61.8 31-96.4 27 28.8 18.5 63 29.2 99.8 29.2 120.8 0 189.1-102.1 185-193.6C399.9 193.1 410.9 181.7 419.6 168.6z"/></svg> </span> </a> </li> </ul> </div> </footer> <script type="application/ld+json"> { "@context" : "http://schema.org", "@type" : "WebSite", "name" : "Прогрессор", "url" : "http://prgssr.ru" } </script> <!-- Yandex.Metrika counter --> <script type="text/javascript" data-proofer-ignore> (function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter32557520 = new Ya.Metrika({ id:32557520, clickmap:true, trackLinks:true, accurateTrackBounce:true }); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = "https://mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks"); </script> <noscript><div><img src="https://mc.yandex.ru/watch/32557520" style="position:absolute; left:-9999px;" alt="ym" /></div></noscript> <!-- /Yandex.Metrika counter --> </body> </html>
